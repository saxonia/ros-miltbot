<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="utf-8" />
    <link rel="stylesheet" type="text/css" href="../../libs/bulma.css">
    <link rel="stylesheet" href="../../css/index.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.js"></script>
    <script type="text/javascript" src="../../script/index.js" ></script>

    <script type="text/javascript" src="../../libs/eventemitter2.min.js"></script>
    <script type="text/javascript" src="../../libs/roslib.min.js"></script>

    <script type="text/javascript">
      var ros = new ROSLIB.Ros({
        url : 'ws://127.0.1.1:9090'
      });
    
      ros.on('connection', function() {
        console.log('Connected to websocket server.');
      });
    
      ros.on('error', function(error) {
        console.log('Error connecting to websocket server: ', error);
      });
    
      ros.on('close', function() {
        console.log('Connection to websocket server closed.');
      });

      function viewWaypoint(waypoints) {
        var x = "";
        for(var i = 0; i < waypoints.length; i++) {
          if(i == 0) {
            x = x + "<option disabled selected>Select Target</option>";
          }
          x = x + "<option>";
          x = x + waypoints[i].name;
          x = x + "</option>";
        }
          document.getElementById("waypoints_list").innerHTML = x;
      }

      var getWaypointListClient = new ROSLIB.Service({
        ros : ros,
        name : '/get_waypoint_list',
        serviceType : 'miltbot_map/GetWaypointList'
      });
      var request = new ROSLIB.ServiceRequest({
        building : "Building 4",
        floor : "Floor 20"
      });
    
      getWaypointListClient.callService(request, function(result) {
        viewWaypoint(result.waypoints);
      });
    </script>

  </head>

  <body>
    <nav class="nav has-shadow">
      <div class="container" id="nav">
        <a class="nav-item">
          <img src="http://bulma.io/images/bulma-logo.png" alt="Bulma logo">
          <!--<h1>Miltbot</h1>-->
        </a>
        <a class="nav-item is-tab " href="../home.html">Home</a>
        <a class="nav-item is-tab is-active" href="task-manager.html">Task Manager</a>
        <a class="nav-item is-tab" href="monitor.html">System Monitor</a>
        <a class="nav-item is-tab" href="map-manager.html">Map Manager</a>
        <a class="nav-item is-tab" href="about.html">About</a>
      </div>
    </nav>

    <section class="section">
      <div class="container">
        <h1 class="title is-3">Overview</h1>
        <hr>
        <div class="box">
          <div class="columns">
            <div class="column"> 
              <label class="label">Robot</label>
              <p class="control">
                <span class="select">
                  <select>
                    <option disabled selected>Select Robot</option>
                    <option>Robot1</option>
                  </select>
                </span>
              </p>
            </div>
            <div class="column">
              <label class="label">Floor</label>
              <p class="control">
                <span class="select">
                  <select>
                    <option disabled selected>Select Floor</option>
                    <option>Floor M</option>
                    <!--<option>Floor 17</option>-->
                    <!--<option>Floor 20</option>-->
                  </select>
                </span>
              </p>
            </div>
            <div class="column">
              <label class="label">Target</label>
              <p class="control">
                <span class="select">
                  <select id="waypoints_list">
                    <!--<option disabled selected>Select Target</option>-->
                  </select>
                </span>
              </p>
            </div>
            <div class="column">
              <label class="label">Task</label>
              <p class="control">
                <span class="select">
                  <select>
                    <option disabled selected>Select Task</option>
                    <option>Go To Target</option>
                    <option>Receive Supplies</option>
                    <option>Send Supplies</option>
                  </select>
                </span>
              </p>
            </div>
          </div>
          
          <div class="control is-grouped">
            <p class="control">
              <a class="button is-primary" href="add-task.html">
                Accept
              </a>
            </p>
            <p class="control">
              <a class="button is-danger">
                Cancel
              </a>
            </p>
          </div>
        </div>
      </div>
    </section>
    
  </body>
</html>